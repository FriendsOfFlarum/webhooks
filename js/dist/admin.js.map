{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/webhooks/webpack/bootstrap","webpack://@fof/webhooks/webpack/runtime/compat get default export","webpack://@fof/webhooks/webpack/runtime/define property getters","webpack://@fof/webhooks/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/webhooks/webpack/runtime/make namespace object","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'admin/app')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/extenders')\"","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'admin/components/ExtensionPage')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/utils/Stream')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/utils/withAttr')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Button')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Select')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/LoadingIndicator')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/Component')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Alert')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Tooltip')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('flarum-tags', 'common/helpers/tagsLabel')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Switch')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Dropdown')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Icon')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/models/Group')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/FormModal')\"","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/components/Form')\"","webpack://@fof/webhooks/./src/admin/components/WebhookEditModal.tsx","webpack://@fof/webhooks/./src/admin/components/SettingsListItem.tsx","webpack://@fof/webhooks/./src/admin/components/WebhooksPage.tsx","webpack://@fof/webhooks/external root \"flarum.reg.get('core', 'common/Model')\"","webpack://@fof/webhooks/./src/admin/models/Webhook.ts","webpack://@fof/webhooks/./src/admin/extend.ts","webpack://@fof/webhooks/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/app');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/extenders');","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'admin/components/ExtensionPage');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/Stream');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/utils/withAttr');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Button');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Select');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/LoadingIndicator');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Component');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Alert');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Tooltip');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('flarum-tags', 'common/helpers/tagsLabel');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Switch');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Dropdown');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Icon');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/models/Group');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/FormModal');","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/components/Form');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Switch from 'flarum/common/components/Switch';\nimport Button from 'flarum/common/components/Button';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Icon from 'flarum/common/components/Icon';\nimport Group from 'flarum/common/models/Group';\nimport Stream from 'flarum/common/utils/Stream';\nimport FormModal from 'flarum/common/components/FormModal';\nimport Form from 'flarum/common/components/Form';\nexport const sortByProp = prop => (a, b) => {\n  const propA = String(a[prop]).toUpperCase(); // ignore upper and lowercase\n  const propB = String(b[prop]).toUpperCase(); // ignore upper and lowercase\n\n  return propA < propB ? -1 : propA > propB ? 1 : 0;\n};\nexport const groupBy = (obj, fn) => {\n  const keys = Object.keys(obj);\n  const vals = Object.values(obj);\n  return keys.map(typeof fn === 'function' ? fn : val => obj[val][fn]).reduce((acc, val, i) => {\n    if (!acc[val]) acc[val] = {};\n    acc[val][keys[i]] = vals[i];\n    return acc;\n  }, {});\n};\nexport const GROUP_ICONS = {\n  2: 'fas fa-globe',\n  3: 'fas fa-user'\n};\nexport default class WebhookEditModal extends FormModal {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"loadingEvents\", false);\n    _defineProperty(this, \"webhook\", void 0);\n    _defineProperty(this, \"groupId\", void 0);\n    _defineProperty(this, \"extraText\", void 0);\n    _defineProperty(this, \"name\", void 0);\n    _defineProperty(this, \"usePlainText\", void 0);\n    _defineProperty(this, \"maxPostContentLength\", void 0);\n    _defineProperty(this, \"includeTags\", void 0);\n    _defineProperty(this, \"events\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.webhook = this.attrs.webhook;\n    const events = app.data['fof-webhooks.events'];\n    this.groupId = Stream(this.webhook.groupId() || Group.GUEST_ID);\n    this.extraText = Stream(this.webhook.extraText() || '');\n    this.name = Stream(this.webhook.name() || '');\n    this.usePlainText = Stream(this.webhook.usePlainText());\n    this.maxPostContentLength = Stream(this.webhook.maxPostContentLength());\n    this.includeTags = Stream(this.webhook.includeTags());\n    this.events = groupBy(events.reduce((obj, evt) => {\n      var _m$;\n      const m = /((?:[a-z]\\\\?)+?)\\\\Events?\\\\([a-z]+)/i.exec(evt);\n      const data = {\n        full: evt,\n        name: (_m$ = m == null ? void 0 : m[2]) != null ? _m$ : evt\n      };\n      if (!m) {\n        obj.other.push(data);\n        obj.other = obj.other.sort();\n        return obj;\n      }\n      const group = m[1].toLowerCase().replaceAll('\\\\', '.');\n      if (!obj[group]) obj[group] = [];\n      obj[group] = obj[group].concat(data).sort();\n      return obj;\n    }, {\n      other: []\n    }), key => key.split('.')[0]);\n  }\n  className() {\n    return 'Modal--medium';\n  }\n  title() {\n    return app.translator.trans('fof-webhooks.admin.settings.modal.title');\n  }\n  content() {\n    var _this$webhook$tags;\n    const group = app.store.getById('groups', this.groupId());\n    const isFilteringTags = !!((_this$webhook$tags = this.webhook.tags()) != null && _this$webhook$tags.length);\n    return m(\"div\", {\n      className: \"FofWebhooksModal Modal-body\"\n    }, m(Form, null, m(Switch, {\n      state: this.usePlainText(),\n      onchange: this.usePlainText\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.use_plain_text_label')), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", {\n      className: \"label\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.max_post_content_length_label')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.max_post_content_length_help')), m(\"input\", {\n      type: \"number\",\n      min: \"0\",\n      className: \"FormControl\",\n      bidi: this.maxPostContentLength,\n      onkeypress: this.onkeypress.bind(this)\n    })), m(\"div\", {\n      className: \"Form-group hasLoading\"\n    }, m(\"label\", {\n      className: \"label\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.extra_text_label')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.extra_text_help')), m(\"input\", {\n      type: \"text\",\n      className: \"FormControl\",\n      bidi: this.extraText,\n      onkeypress: this.onkeypress.bind(this)\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", {\n      className: \"label\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.name_label')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.name_help')), m(\"input\", {\n      type: \"text\",\n      className: \"FormControl\",\n      bidi: this.name,\n      placeholder: app.forum.attribute('title'),\n      onkeypress: this.onkeypress.bind(this)\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(\"label\", {\n      className: \"label\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.group_label')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.group_help')), m(Dropdown, {\n      label: [m(Icon, {\n        name: group.icon() || GROUP_ICONS[group.id()]\n      }), group.namePlural()],\n      buttonClassName: \"Button Button--danger\"\n    }, app.store.all('groups').filter(g => ['1', '2'].includes(g.id())).map(g => m(Button, {\n      active: group.id() === g.id(),\n      disabled: group.id() === g.id(),\n      icon: g.icon() || GROUP_ICONS[g.id()],\n      onclick: () => this.groupId(g.id()),\n      type: \"button\"\n    }, g.namePlural())))), m(\"div\", {\n      className: \"Form-group Webhook-events\"\n    }, m(\"label\", {\n      className: \"label\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.events_label')), m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.description')), this.webhook.service() !== 'microsoft-teams' && m(\"div\", {\n      style: {\n        marginTop: '15px'\n      }\n    }, m(Switch, {\n      state: this.includeTags(),\n      onchange: this.includeTags,\n      disabled: !isFilteringTags\n    }, app.translator.trans('fof-webhooks.admin.settings.modal.include_matching_tags_label'))), Object.entries(this.events).map(_ref => {\n      let [, events] = _ref;\n      return m(\"div\", null, Object.entries(events).sort(sortByProp(0)).map(_ref2 => {\n        let [group, events] = _ref2;\n        return events.length ? m(\"div\", null, m(\"h3\", null, this.translate(group)), events.map(event => m(Switch, {\n          state: this.webhook.events().includes(event.full),\n          disabled: !!this.loadingEvents,\n          loading: this.loadingEvents === event.full,\n          onchange: this.updateEvents.bind(this, event.full)\n        }, this.translate(group, event.name.toLowerCase())))) : null;\n      }));\n    })), m(\"div\", {\n      className: \"Form-group\"\n    }, m(Button, {\n      type: \"submit\",\n      className: \"Button Button--primary\",\n      loading: this.loading,\n      disabled: !this.isDirty()\n    }, app.translator.trans('core.admin.settings.submit_button')))));\n  }\n  translate(group, key) {\n    if (key === void 0) {\n      key = 'title';\n    }\n    return app.translator.trans(\"fof-webhooks.admin.settings.actions.\".concat(group, \".\").concat(key));\n  }\n  isDirty() {\n    return this.extraText() != this.webhook.extraText() || this.groupId() !== this.webhook.groupId() || this.usePlainText() !== this.webhook.usePlainText() || this.includeTags() !== this.webhook.includeTags() || this.maxPostContentLength() != this.webhook.maxPostContentLength() || this.name() != this.webhook.name();\n  }\n  async onsubmit(e) {\n    e.preventDefault();\n    this.loading = true;\n    try {\n      await this.webhook.save({\n        extraText: this.extraText(),\n        groupId: this.groupId(),\n        usePlainText: this.usePlainText(),\n        includeTags: this.includeTags(),\n        maxPostContentLength: this.maxPostContentLength() || 0,\n        name: this.name()\n      });\n    } finally {\n      this.loading = false;\n      m.redraw();\n    }\n  }\n  onkeypress(e) {\n    if (e.key === 'Enter') {\n      this.onsubmit(e);\n    }\n  }\n  updateEvents(event, checked) {\n    this.loadingEvents = event;\n    let events = [...this.webhook.events()];\n    if (checked) {\n      events.push(event);\n    } else {\n      events.splice(events.indexOf(event), 1);\n    }\n    return this.attrs.updateWebhook(events).finally(() => {\n      this.loadingEvents = false;\n      m.redraw();\n    });\n  }\n}\nflarum.reg.add('fof-webhooks', 'admin/components/WebhookEditModal', WebhookEditModal);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Component from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\nimport Alert from 'flarum/common/components/Alert';\nimport Tooltip from 'flarum/common/components/Tooltip';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport tagsLabel from 'ext:flarum/tags/common/helpers/tagsLabel';\nimport WebhookEditModal from './WebhookEditModal';\nexport default class SettingsListItem extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"webhook\", void 0);\n    _defineProperty(this, \"services\", void 0);\n    _defineProperty(this, \"url\", void 0);\n    _defineProperty(this, \"service\", void 0);\n    _defineProperty(this, \"events\", void 0);\n    _defineProperty(this, \"error\", void 0);\n    _defineProperty(this, \"loading\", void 0);\n    _defineProperty(this, \"deleting\", false);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.webhook = this.attrs.webhook;\n    this.services = this.attrs.services;\n    this.url = Stream(this.webhook.url());\n    this.service = Stream(this.webhook.service());\n    this.events = Stream(this.webhook.events());\n    this.error = Stream(this.webhook.error());\n    this.loading = {};\n  }\n  view() {\n    var _webhook$tags;\n    const {\n      webhook,\n      services\n    } = this;\n    const isTagsEnabled = app.initializers.has('flarum-tags');\n    const tags = webhook.tags().filter(Boolean);\n    const service = webhook.service();\n    const errors = [webhook.error && webhook.error()];\n    if (!services[service]) {\n      errors.push(app.translator.trans('fof-webhooks.admin.errors.service_not_found', {\n        service\n      }));\n    } else if (!webhook.isValid()) {\n      errors.push(app.translator.trans('fof-webhooks.admin.errors.url_invalid'));\n    } else if (!isTagsEnabled && webhook.tags().length !== 0) {\n      errors.push(app.translator.trans('fof-webhooks.admin.errors.tag_disabled'));\n    } else if (tags.length !== ((_webhook$tags = webhook.tags()) == null ? void 0 : _webhook$tags.length)) {\n      errors.push(app.translator.trans('fof-webhooks.admin.errors.tag_invalid'));\n    }\n    const changeTags = () => app.modal.show(() => flarum.reg.asyncModuleImport('ext:flarum/tags/common/components/TagSelectionModal'), {\n      selectedTags: tags,\n      onsubmit: tags => this.update('tagIds')(tags.map(tag => tag.id()))\n    });\n    return m(\"div\", {\n      className: \"Webhooks--row\",\n      \"data-webhook-id\": webhook.id()\n    }, m(\"div\", {\n      className: \"Webhook-input\"\n    }, m(Select, {\n      options: services,\n      value: service,\n      onchange: this.update('service'),\n      disabled: this.loading['service']\n    }), m(\"input\", {\n      className: \"FormControl Webhook-url\",\n      type: \"url\",\n      value: this.url(),\n      onchange: withAttr('value', this.update('url')),\n      disabled: this.loading['url'],\n      placeholder: app.translator.trans('fof-webhooks.admin.settings.help.url')\n    }), isTagsEnabled && m(Tooltip, {\n      text: app.translator.trans('fof-webhooks.admin.settings.item.edit_tags_button')\n    }, m(Button, {\n      className: \"Button\",\n      onclick: changeTags\n    }, tags.length ? tagsLabel(tags, {\n      onclick: changeTags\n    }) : m(\"span\", {\n      className: \"TagsLabel\",\n      onclick: changeTags\n    }, app.translator.trans('fof-webhooks.admin.settings.item.tag_any_label')))), m(Tooltip, {\n      text: app.translator.trans('fof-webhooks.admin.settings.item.edit_tooltip')\n    }, m(Button, {\n      type: \"button\",\n      className: \"Button Button--icon Webhook-button\",\n      icon: \"fas fa-edit\",\n      onclick: () => app.modal.show(WebhookEditModal, {\n        webhook,\n        updateWebhook: this.update('events')\n      })\n    })), m(Tooltip, {\n      text: app.translator.trans('fof-webhooks.admin.settings.item.delete_tooltip')\n    }, m(Button, {\n      type: \"button\",\n      className: \"Button Button--danger Button--icon Webhook-button\",\n      icon: \"fas fa-times\",\n      loading: this.deleting,\n      onclick: this.delete.bind(this)\n    })), m(\"span\", null)), !this.events().length && m(Alert, {\n      className: \"Webhook-error\",\n      dismissible: false\n    }, app.translator.trans('fof-webhooks.admin.settings.help.disabled')), errors.filter(Boolean).map(error => m(Alert, {\n      className: \"Webhook-error\",\n      type: \"error\",\n      dismissible: false\n    }, typeof error === 'string' ? app.translator.trans(error) : error)));\n  }\n  update(field) {\n    return async value => {\n      this.loading[field] = true;\n      try {\n        await this.webhook.save({\n          [field]: value\n        });\n      } finally {\n        this.loading[field] = false;\n        if (field in this) {\n          this[field](value);\n        }\n        m.redraw();\n      }\n    };\n  }\n  async delete() {\n    var _this$services$this$w;\n    this.deleting = true;\n    const service = (_this$services$this$w = this.services[this.webhook.service()]) != null ? _this$services$this$w : this.webhook.service();\n    const confirmText = app.translator.trans('fof-webhooks.admin.settings.item.delete_confirm_alert', {\n      service\n    }, true);\n    try {\n      if (confirm(confirmText)) {\n        return await this.webhook.delete();\n      }\n    } finally {\n      this.deleting = false;\n      m.redraw();\n    }\n  }\n}\nflarum.reg.add('fof-webhooks', 'admin/components/SettingsListItem', SettingsListItem);","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport SettingsListItem from './SettingsListItem';\nexport default class WebhooksPage extends ExtensionPage {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"services\", void 0);\n    _defineProperty(this, \"values\", void 0);\n    _defineProperty(this, \"newWebhook\", void 0);\n    _defineProperty(this, \"loadingData\", void 0);\n  }\n  oninit(vnode) {\n    super.oninit(vnode);\n    const services = app.data['fof-webhooks.services'];\n    this.values = {};\n    this.services = services.reduce((o, service) => {\n      o[service] = app.translator.trans(\"fof-webhooks.admin.settings.services.\".concat(service), {}, true);\n      return o;\n    }, {});\n    this.newWebhook = {\n      service: Stream('discord'),\n      url: Stream(''),\n      loading: Stream(false)\n    };\n    this.loadingData = Stream(true);\n  }\n  oncreate(vnode) {\n    super.oncreate(vnode);\n    Promise.all([app.store.find('fof-webhooks'), this.isTagsEnabled() && app.store.find('tags')]).then(() => {\n      this.loadingData(false);\n      m.redraw();\n    });\n  }\n  content() {\n    const webhooks = app.store.all('fof-webhooks');\n    if (this.loadingData()) {\n      return m(LoadingIndicator, null);\n    }\n    return m(\"div\", {\n      className: \"WebhookContent\"\n    }, m(\"div\", {\n      className: \"container\"\n    }, m(\"div\", {\n      className: \"Form-group\"\n    }, this.buildSettingComponent({\n      type: 'boolean',\n      setting: 'fof-webhooks.debug',\n      label: app.translator.trans('fof-webhooks.admin.settings.debug_label'),\n      help: app.translator.trans('fof-webhooks.admin.settings.debug_help'),\n      loading: this.loading,\n      onchange: this.updateDebug.bind(this)\n    })), m(\"hr\", null), m(\"form\", null, m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-webhooks.admin.settings.help.general')), this.isTagsEnabled() && m(\"p\", {\n      className: \"helpText\"\n    }, app.translator.trans('fof-webhooks.admin.settings.help.tags')), m(\"fieldset\", null, m(\"div\", {\n      className: \"Webhooks--Container\"\n    }, webhooks.map(webhook => m(SettingsListItem, {\n      webhook: webhook,\n      services: this.services\n    })), m(\"div\", {\n      className: \"Webhooks--row\"\n    }, m(\"div\", {\n      className: \"Webhook-input\"\n    }, m(Select, {\n      options: this.services,\n      value: this.newWebhook.service(),\n      onchange: this.newWebhook.service\n    }), m(\"input\", {\n      className: \"FormControl Webhook-url\",\n      type: \"url\",\n      placeholder: app.translator.trans('fof-webhooks.admin.settings.help.url'),\n      onchange: withAttr('value', this.newWebhook.url),\n      onkeypress: this.onkeypress.bind(this)\n    }), m(Button, {\n      type: \"button\",\n      loading: this.newWebhook.loading(),\n      className: \"Button Button--success Webhook-button\",\n      icon: \"fas fa-plus\",\n      onclick: this.addWebhook.bind(this)\n    }, app.translator.trans('fof-webhooks.admin.settings.item.create_button')))))))));\n  }\n  addWebhook() {\n    if (this.newWebhook.loading()) return;\n    this.newWebhook.loading(true);\n    return app.store.createRecord('fof-webhooks').save({\n      service: this.newWebhook.service(),\n      url: this.newWebhook.url()\n    }).then(() => {\n      this.newWebhook.service('discord');\n      this.newWebhook.url('');\n      this.newWebhook.loading(false);\n      m.redraw();\n    }).catch(() => {\n      this.newWebhook.loading(false);\n      m.redraw();\n    });\n  }\n  onkeypress(e) {\n    if (e.key === 'Enter') {\n      this.addWebhook();\n    }\n  }\n  isTagsEnabled() {\n    return !!flarum.extensions['flarum-tags'];\n  }\n  updateDebug(state) {\n    this.setting('fof-webhooks.debug')(state);\n    return this.saveSettings(new Event(''));\n  }\n}\nflarum.reg.add('fof-webhooks', 'admin/components/WebhooksPage', WebhooksPage);","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.reg.get('core', 'common/Model');","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport app from 'flarum/admin/app';\nimport Model from 'flarum/common/Model';\nexport default class Webhook extends Model {\n  constructor() {\n    super(...arguments);\n    // id = Model.attribute('id');\n    _defineProperty(this, \"service\", Model.attribute('service'));\n    _defineProperty(this, \"url\", Model.attribute('url'));\n    _defineProperty(this, \"error\", Model.attribute('error'));\n    _defineProperty(this, \"events\", Model.attribute('events'));\n    _defineProperty(this, \"tagIds\", Model.attribute('tagId'));\n    _defineProperty(this, \"groupId\", Model.attribute('groupId'));\n    _defineProperty(this, \"extraText\", Model.attribute('extraText'));\n    _defineProperty(this, \"name\", Model.attribute('name'));\n    _defineProperty(this, \"isValid\", Model.attribute('isValid', Boolean));\n    _defineProperty(this, \"usePlainText\", Model.attribute('usePlainText', Boolean));\n    _defineProperty(this, \"maxPostContentLength\", Model.attribute('maxPostContentLength'));\n    _defineProperty(this, \"includeTags\", Model.attribute('includeTags', Boolean));\n  }\n  tags() {\n    return this.tagIds().map(id => app.store.getById('tags', id));\n  }\n}\nflarum.reg.add('fof-webhooks', 'admin/models/Webhook', Webhook);","import Extend from 'flarum/common/extenders';\nimport WebhooksPage from './components/WebhooksPage';\nimport Webhook from './models/Webhook';\nexport default [new Extend.Store().add('fof-webhooks', Webhook), new Extend.Admin().page(WebhooksPage)];","import app from 'flarum/admin/app';\nexport { default as extend } from './extend';\napp.initializers.add('fof/webhooks', () => {\n  // Settings are now registered via extend.ts\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","reg","_typeof","iterator","constructor","_defineProperty","e","r","t","i","toPrimitive","TypeError","String","toPropertyKey","configurable","writable","GROUP_ICONS","WebhookEditModal","super","arguments","this","oninit","vnode","webhook","attrs","events","groupId","extraText","name","usePlainText","maxPostContentLength","includeTags","fn","keys","vals","values","map","reduce","acc","val","groupBy","evt","_m$","m","exec","data","full","other","push","sort","group","toLowerCase","replaceAll","concat","split","className","title","trans","content","_this$webhook$tags","getById","isFilteringTags","tags","length","state","onchange","type","min","bidi","onkeypress","bind","placeholder","attribute","label","icon","id","namePlural","buttonClassName","all","filter","g","includes","active","disabled","onclick","service","style","marginTop","entries","_ref","b","propA","toUpperCase","propB","_ref2","translate","event","loadingEvents","loading","updateEvents","isDirty","onsubmit","preventDefault","save","redraw","checked","splice","indexOf","updateWebhook","finally","add","SettingsListItem","services","url","error","view","_webhook$tags","isTagsEnabled","has","Boolean","errors","isValid","changeTags","show","asyncModuleImport","selectedTags","update","tag","options","text","deleting","delete","dismissible","field","async","_this$services$this$w","confirmText","confirm","WebhooksPage","newWebhook","loadingData","oncreate","Promise","find","then","webhooks","buildSettingComponent","setting","help","updateDebug","addWebhook","createRecord","catch","extensions","saveSettings","Event","Webhook","tagIds","page"],"ignoreList":[],"sourceRoot":""}