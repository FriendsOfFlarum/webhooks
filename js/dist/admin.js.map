{"version":3,"sources":["webpack://@fof/webhooks/webpack/bootstrap","webpack://@fof/webhooks/./admin.js","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@fof/webhooks/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/webhooks/./src/admin/components/SettingsListItem.js","webpack://@fof/webhooks/./src/admin/components/WebhookEditModal.js","webpack://@fof/webhooks/./src/admin/components/WebhooksPage.js","webpack://@fof/webhooks/./src/admin/index.js","webpack://@fof/webhooks/./src/admin/models/Webhook.js","webpack://@fof/webhooks/external \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/Component']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/Model']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/components/Button']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/components/Dropdown']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/components/Select']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/models/Forum']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/models/Group']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/webhooks/external \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/webhooks/external \"flarum.core.compat['tags/common/helpers/tagIcon']\""],"names":["SettingsListItem","oninit","vnode","webhook","attrs","services","url","Stream","service","events","error","loading","view","errors","push","app","translator","trans","isValid","tagsEnabled","initializers","has","tag","tagIdLoading","update","withAttr","tagIcon","className","name","store","all","map","id","modal","show","WebhookEditModal","updateWebhook","bind","length","filter","Boolean","field","value","save","then","m","redraw","Component","sortByProp","prop","a","b","propA","toUpperCase","propB","groupBy","obj","fn","keys","Object","vals","values","val","reduce","acc","i","data","groupId","Group","GUEST_ID","extraText","usePlainText","maxPostContentLength","evt","exec","other","full","sort","group","toLowerCase","replace","concat","key","split","title","content","icons","getById","onsubmit","onkeypress","icon","namePlural","g","includes","entries","translate","event","onchange","isDirty","e","preventDefault","group_id","use_plain_text","max_post_content_length","checked","component","splice","indexOf","Modal","WebhooksPage","o","newWebhook","webhooks","addWebhook","createRecord","changed","fields","some","settings","addPrefix","ExtensionPage","add","models","Webhook","Forum","prototype","Model","hasMany","extensionData","registerPage","attribute","apiEndpoint","exists","tagId"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';\r\n","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import Component from 'flarum/common/Component';\nimport Dropdown from 'flarum/common/components/Dropdown';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\nimport Alert from 'flarum/common/components/Alert';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport icon from 'flarum/common/helpers/icon';\n\nimport tagIcon from 'flarum/tags/common/helpers/tagIcon';\n\nimport WebhookEditModal from './WebhookEditModal';\n\nexport default class SettingsListItem extends Component {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.webhook = this.attrs.webhook;\n        this.services = this.attrs.services;\n\n        this.url = Stream(this.webhook.url());\n        this.service = Stream(this.webhook.service());\n        this.events = Stream(this.webhook.events());\n        this.error = Stream(this.webhook.error());\n\n        this.loading = {};\n    }\n\n    view() {\n        const { webhook, services } = this;\n\n        const service = webhook.service();\n        const errors = [webhook.error && webhook.error()];\n\n        if (!services[service]) {\n            errors.push(app.translator.trans('fof-webhooks.admin.errors.service_not_found', { service }));\n        } else if (!webhook.isValid()) {\n            errors.push(app.translator.trans('fof-webhooks.admin.errors.url_invalid'));\n        }\n\n        const tagsEnabled = app.initializers.has('flarum-tags');\n        const tag = webhook.tag();\n        const tagIdLoading = !!this.loading['tag_id'];\n\n        return (\n            <div className=\"Webhooks--row\">\n                <div className=\"Webhook-input\">\n                    <Select options={services} value={service} onchange={this.update('service')} disabled={this.loading['service']} />\n\n                    <input\n                        className=\"FormControl Webhook-url\"\n                        type=\"url\"\n                        value={this.url()}\n                        onchange={withAttr('value', this.update('url'))}\n                        disabled={this.loading['url']}\n                        placeholder={app.translator.trans('fof-webhooks.admin.settings.help.url')}\n                    />\n\n                    {tagsEnabled && (\n                        <Dropdown\n                            buttonClassName=\"Button\"\n                            label={\n                                tag ? (\n                                    <span>\n                                        {!tagIdLoading && tagIcon(tag, { className: 'Button-icon' })} {tag.name()}\n                                    </span>\n                                ) : (\n                                    app.translator.trans('fof-webhooks.admin.settings.item.tag_any_label')\n                                )\n                            }\n                            icon={tagIdLoading ? 'fas fa-spinner fa-spin' : tag ? true : 'fas fa-tag'}\n                            caretIcon={null}\n                        >\n                            <Button icon={'fas fa-tag'} onclick={() => this.update('tag_id')(null)}>\n                                {app.translator.trans('fof-webhooks.admin.settings.item.tag_any_label')}\n                            </Button>\n\n                            <hr />\n\n                            {app.store.all('tags').map((tag) => (\n                                <Button icon={true} onclick={() => this.update('tag_id')(tag.id())}>\n                                    {tagIcon(tag, { className: 'Button-icon' })} {tag.name()}\n                                </Button>\n                            ))}\n                        </Dropdown>\n                    )}\n\n                    <Button\n                        type=\"button\"\n                        className=\"Button Webhook-button\"\n                        icon=\"fas fa-edit\"\n                        onclick={() =>\n                            app.modal.show(WebhookEditModal, {\n                                webhook,\n                                updateWebhook: this.update('events'),\n                            })\n                        }\n                    />\n\n                    <Button type=\"button\" className=\"Button Button--warning Webhook-button\" icon=\"fas fa-times\" onclick={this.delete.bind(this)} />\n                </div>\n\n                {!this.events().length && (\n                    <Alert className=\"Webhook-error\" dismissible={false}>\n                        {app.translator.trans('fof-webhooks.admin.settings.help.disabled')}\n                    </Alert>\n                )}\n\n                {errors.filter(Boolean).map((error) => (\n                    <Alert className=\"Webhook-error\" type=\"error\" dismissible={false}>\n                        {app.translator.trans(error)}\n                    </Alert>\n                ))}\n            </div>\n        );\n    }\n\n    update(field) {\n        return (value) => {\n            this.loading[field] = true;\n\n            return this.webhook\n                .save({\n                    [field]: value,\n                })\n                .catch(() => {})\n                .then(() => {\n                    this.loading[field] = false;\n\n                    if (this[field]) this[field](value);\n\n                    m.redraw();\n                });\n        };\n    }\n\n    delete() {\n        return this.webhook.delete().then(() => m.redraw());\n    }\n}\n","import Switch from 'flarum/common/components/Switch';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Dropdown from 'flarum/common/components/Dropdown';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport Group from 'flarum/common/models/Group';\r\nimport Modal from 'flarum/common/components/Modal';\r\nimport Stream from 'flarum/common/utils/Stream';\r\n\r\nconst sortByProp = (prop) => (a, b) => {\r\n    const propA = a[prop].toUpperCase(); // ignore upper and lowercase\r\n    const propB = b[prop].toUpperCase(); // ignore upper and lowercase\r\n\r\n    return propA < propB ? -1 : propA > propB ? 1 : 0;\r\n};\r\n\r\nconst groupBy = (obj, fn) => {\r\n    const keys = Object.keys(obj);\r\n    const vals = Object.values(obj);\r\n\r\n    return keys.map(typeof fn === 'function' ? fn : (val) => val[fn]).reduce((acc, val, i) => {\r\n        if (!acc[val]) acc[val] = {};\r\n\r\n        acc[val][keys[i]] = vals[i];\r\n\r\n        return acc;\r\n    }, {});\r\n};\r\n\r\nexport default class WebhookEditModal extends Modal {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.webhook = this.attrs.webhook;\r\n\r\n        const events = app.data['fof-webhooks.events'];\r\n\r\n        this.groupId = Stream(this.webhook.groupId() || Group.GUEST_ID);\r\n        this.extraText = Stream(this.webhook.extraText() || '');\r\n        this.usePlainText = Stream(this.webhook.usePlainText());\r\n        this.maxPostContentLength = Stream(this.webhook.maxPostContentLength());\r\n\r\n        this.events = groupBy(\r\n            events.reduce(\r\n                (obj, evt) => {\r\n                    const m = /((?:[a-z]+\\\\?)+?)\\\\Events?\\\\([a-z]+)/i.exec(evt);\r\n\r\n                    if (!m) {\r\n                        obj.other.push({\r\n                            full: evt,\r\n                            name: evt,\r\n                        });\r\n                        obj.other = obj.other.sort();\r\n                        return obj;\r\n                    }\r\n\r\n                    const group = m[1].toLowerCase().replace('\\\\', '.');\r\n\r\n                    if (!obj[group]) obj[group] = [];\r\n\r\n                    obj[group] = obj[group]\r\n                        .concat({\r\n                            full: evt,\r\n                            name: m[2],\r\n                        })\r\n                        .sort();\r\n\r\n                    return obj;\r\n                },\r\n                { other: [] }\r\n            ),\r\n            (key) => key.split('.')[0]\r\n        );\r\n    }\r\n\r\n    className() {\r\n        return 'Modal--medium';\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans('fof-webhooks.admin.settings.modal.title');\r\n    }\r\n\r\n    content() {\r\n        const icons = {\r\n            2: 'fas fa-globe',\r\n            3: 'fas fa-user',\r\n        };\r\n\r\n        const group = app.store.getById('groups', this.groupId());\r\n\r\n        return (\r\n            <div className=\"FofWebhooksModal Modal-body\">\r\n                <form className=\"Form\" onsubmit={this.onsubmit.bind(this)}>\r\n                    <Switch state={this.usePlainText()} onchange={this.usePlainText}>\r\n                        {app.translator.trans('fof-webhooks.admin.settings.modal.use_plain_text_label')}\r\n                    </Switch>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.max_post_content_length_label')}</label>\r\n\r\n                        <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.modal.max_post_content_length_help')}</p>\r\n\r\n                        <input\r\n                            type=\"number\"\r\n                            min=\"0\"\r\n                            className=\"FormControl\"\r\n                            bidi={this.maxPostContentLength}\r\n                            onkeypress={this.onkeypress.bind(this)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"Form-group hasLoading\">\r\n                        <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.extra_text_label')}</label>\r\n\r\n                        <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.modal.extra_text_help')}</p>\r\n\r\n                        <input type=\"text\" className=\"FormControl\" bidi={this.extraText} onkeypress={this.onkeypress.bind(this)} />\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.group_label')}</label>\r\n                        <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.modal.group_help')}</p>\r\n\r\n                        <Dropdown label={[icon(group.icon() || icons[group.id()]), group.namePlural()]} buttonClassName=\"Button Button--danger\">\r\n                            {app.store\r\n                                .all('groups')\r\n                                .filter((g) => ['1', '2'].includes(g.id()))\r\n                                .map((g) => (\r\n                                    <Button\r\n                                        active={group.id() === g.id()}\r\n                                        disabled={group.id() === g.id()}\r\n                                        icon={g.icon() || icons[g.id()]}\r\n                                        onclick={() => this.groupId(g.id())}\r\n                                    >\r\n                                        {g.namePlural()}\r\n                                    </Button>\r\n                                ))}\r\n                        </Dropdown>\r\n                    </div>\r\n\r\n                    <div className=\"Form-group Webhook-events\">\r\n                        <label className=\"label\">{app.translator.trans('fof-webhooks.admin.settings.modal.events_label')}</label>\r\n\r\n                        {app.translator.trans('fof-webhooks.admin.settings.modal.description')}\r\n\r\n                        {Object.entries(this.events).map(([, events]) => (\r\n                            <div>\r\n                                {Object.entries(events)\r\n                                    .sort(sortByProp(0))\r\n                                    .map(([group, events]) =>\r\n                                        events.length ? (\r\n                                            <div>\r\n                                                <h3>{this.translate(group)}</h3>\r\n                                                {events.map((event) => (\r\n                                                    <Switch\r\n                                                        state={this.webhook.events().includes(event.full)}\r\n                                                        onchange={this.onchange.bind(this, event.full)}\r\n                                                    >\r\n                                                        {this.translate(group, event.name.toLowerCase())}\r\n                                                    </Switch>\r\n                                                ))}\r\n                                            </div>\r\n                                        ) : null\r\n                                    )}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        <Button type=\"submit\" className=\"Button Button--primary\" loading={this.loading} disabled={!this.isDirty()}>\r\n                            {app.translator.trans('core.admin.settings.submit_button')}\r\n                        </Button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    translate(group, key = 'title') {\r\n        return app.translator.trans(`fof-webhooks.admin.settings.actions.${group}.${key}`);\r\n    }\r\n\r\n    isDirty() {\r\n        return (\r\n            this.extraText() != this.webhook.extraText() ||\r\n            this.groupId() !== this.webhook.groupId() ||\r\n            this.usePlainText() !== this.webhook.usePlainText() ||\r\n            this.maxPostContentLength() != this.webhook.maxPostContentLength()\r\n        );\r\n    }\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault();\r\n\r\n        this.loading = true;\r\n\r\n        return this.webhook\r\n            .save({\r\n                extraText: this.extraText(),\r\n                group_id: this.groupId(),\r\n                use_plain_text: this.usePlainText(),\r\n                max_post_content_length: this.maxPostContentLength() || 0,\r\n            })\r\n            .then(() => {\r\n                this.loading = false;\r\n                m.redraw();\r\n            })\r\n            .catch(() => {\r\n                this.loading = false;\r\n                m.redraw();\r\n            });\r\n    }\r\n\r\n    onkeypress(e) {\r\n        if (e.key === 'Enter') {\r\n            this.onsubmit(e);\r\n        }\r\n    }\r\n\r\n    onchange(event, checked, component) {\r\n        component.loading = true;\r\n\r\n        let events = this.webhook.events();\r\n\r\n        if (checked) {\r\n            events.push(event);\r\n        } else {\r\n            events.splice(events.indexOf(event), 1);\r\n        }\r\n\r\n        return this.attrs.updateWebhook(events).then(() => {\r\n            component.loading = false;\r\n            m.redraw();\r\n        });\r\n    }\r\n}\r\n","import ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport Stream from 'flarum/common/utils/Stream';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Button from 'flarum/common/components/Button';\nimport Select from 'flarum/common/components/Select';\n\nimport SettingsListItem from './SettingsListItem';\n\nexport default class WebhooksPage extends ExtensionPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n\n        this.values = {};\n        this.services = app.data['fof-webhooks.services'].reduce((o, service) => {\n            o[service] = app.translator.trans(`fof-webhooks.admin.settings.services.${service}`);\n            return o;\n        }, {});\n\n        this.newWebhook = {\n            service: Stream('discord'),\n            url: Stream(''),\n            loading: Stream(false),\n        };\n    }\n\n    content() {\n        const webhooks = app.store.all('webhooks');\n\n        return (\n            <div className=\"WebhookContent\">\n                <div className=\"container\">\n                    <form>\n                        <p className=\"helpText\">{app.translator.trans('fof-webhooks.admin.settings.help.general')}</p>\n                        <fieldset>\n                            <div className=\"Webhooks--Container\">\n                                {webhooks.map((webhook) => (\n                                    <SettingsListItem webhook={webhook} services={this.services} />\n                                ))}\n                                <div className=\"Webhooks--row\">\n                                    <div className=\"Webhook-input\">\n                                        <Select options={this.services} value={this.newWebhook.service()} onchange={this.newWebhook.service} />\n\n                                        <input\n                                            className=\"FormControl Webhook-url\"\n                                            type=\"url\"\n                                            placeholder={app.translator.trans('fof-webhooks.admin.settings.help.url')}\n                                            onchange={withAttr('value', this.newWebhook.url)}\n                                            onkeypress={this.onkeypress.bind(this)}\n                                        />\n\n                                        <Button\n                                            type=\"button\"\n                                            loading={this.newWebhook.loading()}\n                                            className=\"Button Button--warning Webhook-button\"\n                                            icon=\"fas fa-plus\"\n                                            onclick={this.addWebhook.bind(this)}\n                                        />\n                                    </div>\n                                </div>\n                            </div>\n                        </fieldset>\n                    </form>\n                </div>\n            </div>\n        );\n    }\n\n    addWebhook() {\n        if (this.newWebhook.loading()) return;\n\n        this.newWebhook.loading(true);\n\n        return app.store\n            .createRecord('webhooks')\n            .save({\n                service: this.newWebhook.service(),\n                url: this.newWebhook.url(),\n            })\n            .then(() => {\n                this.newWebhook.service('discord');\n                this.newWebhook.url('');\n                this.newWebhook.loading(false);\n\n                m.redraw();\n            })\n            .catch(() => {\n                this.newWebhook.loading(false);\n\n                m.redraw();\n            });\n    }\n\n    onkeypress(e) {\n        if (e.key === 'Enter') {\n            this.addWebhook();\n        }\n    }\n\n    /**\n     * @returns boolean\n     */\n    changed() {\n        return this.fields.some((key) => this.values[key]() !== (app.data.settings[this.addPrefix(key)] || ''));\n    }\n}\n","import Model from 'flarum/common/Model';\nimport Forum from 'flarum/common/models/Forum';\n\nimport Webhook from './models/Webhook';\nimport WebhooksPage from './components/WebhooksPage';\n\napp.initializers.add('fof/webhooks', () => {\n    app.store.models.webhooks = Webhook;\n\n    Forum.prototype.webhooks = Model.hasMany('webhooks');\n\n    app.extensionData.for('fof-webhooks').registerPage(WebhooksPage);\n});\n","import Model from 'flarum/common/Model';\n\nexport default class Webhook extends Model {\n    id = Model.attribute('id');\n    service = Model.attribute('service');\n    url = Model.attribute('url');\n\n    error = Model.attribute('error');\n    events = Model.attribute('events');\n\n    tagId = Model.attribute('tag_id');\n\n    groupId = Model.attribute('group_id');\n    extraText = Model.attribute('extra_text');\n\n    isValid = Model.attribute('is_valid', Boolean);\n\n    usePlainText = Model.attribute('use_plain_text', Boolean);\n    maxPostContentLength = Model.attribute('max_post_content_length');\n\n    apiEndpoint() {\n        return `/fof/webhooks${this.exists ? `/${this.data.id}` : ''}`;\n    }\n\n    tag() {\n        return app.store.getById('tags', this.tagId());\n    }\n}\n","module.exports = flarum.core.compat['admin/components/ExtensionPage'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Dropdown'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/models/Forum'];","module.exports = flarum.core.compat['common/models/Group'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/withAttr'];","module.exports = flarum.core.compat['tags/common/helpers/tagIcon'];"],"sourceRoot":""}